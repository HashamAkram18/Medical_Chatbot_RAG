<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!DOCTYPE html>
<html>
	<head>
		<title>Chatbot</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<style>
			body,html{
				height: 100%;
				margin: 0;
				background: rgb(44, 47, 59);
			    background: -webkit-linear-gradient(to right, rgb(40, 59, 34), rgb(54, 60, 70), rgb(32, 32, 43));
				background: linear-gradient(to right, rgb(38, 51, 61), rgb(50, 55, 65), rgb(33, 33, 78));
			}
			.reload-container {
				position: fixed;
				top: 10px;
				right: 10px;
				z-index: 9999;
				}

				.reload-container button {
				background-color: #4CAF50;
				color: white;
				padding: 10px 15px;
				border: none;
				border-radius: 5px;
				cursor: pointer;
				}

				.reload-container button:hover {
				background-color: #3e8e41;
				}

				.reload-container button i {
				margin-right: 5px;
				}

			.chat{
				margin-top: auto;
				margin-bottom: auto;
			}
			.card{
				height: 500px;
				border-radius: 15px !important;
				background-color: rgba(0,0,0,0.4) !important;
			}
			.contacts_body{
				padding:  0.75rem 0 !important;
				overflow-y: auto;
				white-space: nowrap;
			}
			.msg_card_body{
				overflow-y: auto;
			}
			.card-header{
				border-radius: 15px 15px 0 0 !important;
				border-bottom: 0 !important;
			}
			.card-footer{
			border-radius: 0 0 15px 15px !important;
				border-top: 0 !important;
			}
			.container{
				align-content: center;
			}
			.search{
				border-radius: 15px 0 0 15px !important;
				background-color: rgba(0,0,0,0.3) !important;
				border:0 !important;
				color:white !important;
			}
			.search:focus{
				box-shadow:none !important;
			outline:0px !important;
			}
			.type_msg{
				background-color: rgba(0,0,0,0.3) !important;
				border:0 !important;
				color:white !important;
				height: 60px !important;
				overflow-y: auto;
			}
				.type_msg:focus{
				box-shadow:none !important;
			outline:0px !important;
			}
			.attach_btn{
				border-radius: 15px 0 0 15px !important;
				background-color: rgba(0,0,0,0.3) !important;
				border:0 !important;
				color: white !important;
				cursor: pointer;
			}
			.send_btn{
				border-radius: 0 15px 15px 0 !important;
				background-color: rgba(0,0,0,0.3) !important;
				border:0 !important;
				color: white !important;
				cursor: pointer;
			}
			.search_btn{
				border-radius: 0 15px 15px 0 !important;
				background-color: rgba(0,0,0,0.3) !important;
				border:0 !important;
				color: white !important;
				cursor: pointer;
			}
			.contacts{
				list-style: none;
				padding: 0;
			}
			.contacts li{
				width: 100% !important;
				padding: 5px 10px;
				margin-bottom: 15px !important;
			}
			.active{
				background-color: rgba(0,0,0,0.3);
			}
			.user_img{
				height: 70px;
				width: 70px;
				border:1.5px solid #f5f6fa;

			}
			.user_img_msg{
				height: 40px;
				width: 40px;
				border:1.5px solid #f5f6fa;

			}
			.img_cont{
				position: relative;
				height: 70px;
				width: 70px;
			}
			.img_cont_msg{
				height: 40px;
				width: 40px;
			}
			.online_icon{
				position: absolute;
				height: 15px;
				width:15px;
				background-color: #4cd137;
				border-radius: 50%;
				bottom: 0.2em;
				right: 0.4em;
				border:1.5px solid white;
			}
			.offline{
				background-color: #c23616 !important;
			}
			.user_info{
				margin-top: auto;
				margin-bottom: auto;
				margin-left: 15px;
			}
			.user_info span{
				font-size: 20px;
				color: white;
			}
			.user_info p{
				font-size: 10px;
				color: rgba(255,255,255,0.6);
			}
			.video_cam{
				margin-left: 50px;
				margin-top: 5px;
			}
			.video_cam span{
				color: white;
				font-size: 20px;
				cursor: pointer;
				margin-right: 20px;
			}
			.msg_cotainer{
				margin-top: auto;
				margin-bottom: auto;
				margin-left: 10px;
				border-radius: 25px;
				background-color: rgb(82, 172, 255);
				padding: 10px;
				position: relative;
			}
			.msg_cotainer_send{
				margin-top: auto;
				margin-bottom: auto;
				margin-right: 10px;
				border-radius: 25px;
				background-color: #58cc71;
				padding: 10px;
				position: relative;
			}
			.msg_time{
				position: absolute;
				left: 0;
				bottom: -15px;
				color: rgba(255,255,255,0.5);
				font-size: 10px;
			}
			.msg_time_send{
				position: absolute;
				right:0;
				bottom: -15px;
				color: rgba(255,255,255,0.5);
				font-size: 10px;
			}
			.msg_head{
				position: relative;
			}
			#action_menu_btn{
				position: absolute;
				right: 10px;
				top: 10px;
				color: white;
				cursor: pointer;
				font-size: 20px;
			}
			.action_menu{
				z-index: 1;
				position: absolute;
				padding: 15px 0;
				background-color: rgba(0,0,0,0.5);
				color: white;
				border-radius: 15px;
				top: 30px;
				right: 15px;
				display: none;
			}
			.action_menu ul{
				list-style: none;
				padding: 0;
				margin: 0;
			}
			.action_menu ul li{
				width: 100%;
				padding: 10px 15px;
				margin-bottom: 5px;
			}
			.action_menu ul li i{
				padding-right: 10px;
			}
			.action_menu ul li:hover{
				cursor: pointer;
				background-color: rgba(0,0,0,0.2);
			}
			@media(max-width: 576px){
				.contacts_card{
				margin-bottom: 15px !important;
			}
			}
		</style>
	</head>
	
	
	<body>
		<div class="container-fluid h-100">
			<div class="row justify-content-center h-100">		
				<div class="col-md-8 col-xl-6 chat">
					<div class="card">
						<div class="card-header msg_head">
							<div class="d-flex bd-highlight">
								<div class="img_cont">
									<img src="https://i.ibb.co/fSNP7Rz/icons8-chatgpt-512.png" class="rounded-circle user_img">
									<span class="online_icon"></span>
								</div>
								<div class="user_info">
									<span>Medical Chatbot</span>
									<p>Ask me anything!</p>
								</div>
							</div>
						</div>
						<div id="messageFormeight" class="card-body msg_card_body">
							
							
						</div>
						<div class="card-footer">
							<form id="messageArea" class="input-group">
                                <input type="text" id="text" name="msg" placeholder="Type your message..." autocomplete="off" class="form-control type_msg" required/>
								<div class="input-group-append">
									<button type="submit" id="send" class="input-group-text send_btn"><i class="fas fa-location-arrow"></i></button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="reload-container">
			<button onclick="window.location.reload()">
				<i class="fas fa-sync-alt"></i>
				Reload Page
			</button>
		</div>

		<script>
			$(document).ready(function() {
				$("#messageArea").on("submit", function(event) {
					const date = new Date();
					const hour = date.getHours();
					const minute = date.getMinutes();
					const str_time = hour+":"+minute;
					var rawText = $("#text").val();

					var userHtml = '<div class="d-flex justify-content-end mb-4"><div class="msg_cotainer_send">' + rawText + '<span class="msg_time_send">'+ str_time + '</span></div><div class="img_cont_msg"><img src="https://media.licdn.com/dms/image/v2/D4D03AQGAEqqjO7P4YA/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1710667089790?e=1734566400&v=beta&t=voEn2yzfI7OnIDuCF-thGfK4q0bhzt2fD8C9s_MG2a8" class="rounded-circle user_img_msg"></div></div>';
					
					$("#text").val("");
					$("#messageFormeight").append(userHtml);

					$.ajax({
						data: {
							msg: rawText,	
						},
						type: "POST",
						url: "/get",
					}).done(function(data) {
						var botHtml = '<div class="d-flex justify-content-start mb-4"><div class="img_cont_msg"><img src="data:image/jpeg;base64,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" class="rounded-circle user_img_msg"></div><div class="msg_cotainer">' + data + '<span class="msg_time">' + str_time + '</span></div></div>';
						$("#messageFormeight").append($.parseHTML(botHtml));
					});
					event.preventDefault();
				});
			});
		</script>
        
    </body>
</html>